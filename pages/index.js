import Head from "next/head";
import Link from "next/link";
import Layout from "../components/Layout";

export default function Home({ years }) {
  return (
    <Layout years={years}>
      <Head>
        <title>Vulnerability Data</title>
        <meta name="description" content="Vulnerability Data" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <h2 className="text-xl my-10">Vulnerabilities reported in: </h2>
      <ul className=" flex gap-4 ">
        {years &&
          years.map((year) => (
            <li key={year}>
              <Link passHref href={`/${year}`}>
                <a className="btn btn-primary btn-xl text-5xl py-2 h-auto">{year}</a>
              </Link>
            </li>
          ))}
      </ul>
      <div className="py-10">
        <p className="mb-5">CVE® is a list of entries—each containing an identification number, a description, and at least one public reference—for publicly known cybersecurity vulnerabilities.</p>
        <p className="mb-5">CVE Entries are used in numerous cybersecurity products and services from around the world, including the U.S. National Vulnerability Database (NVD).</p>
      </div>
    </Layout>
  );
}

export const getStaticProps = async (ctx) => {
  // const years = fs.readdirSync("./data");
  const years = ["2019", "2020", "2021", "2022"];

  return {
    props: {
      years: years.map((file) => file.match(/\d+/g)),
    },
  };
};
